Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl apply -f rc-helloworld.yml                                                            
replicationcontroller "helloworld-controller" created                                           
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl get rc                                                                                
NAME                    DESIRED   CURRENT   READY     AGE                                       
helloworld-controller   2         2         2         13s                                       
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl get pods --show-labels                                                                
NAME                          READY     STATUS    RESTARTS   AGE       LABELS                   
helloworld-controller-q2zgz   1/1       Running   0          25s       app=helloworld           
my-nginx                      1/1       Running   0          6m        app=helloworld           
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl delete pod my-nginx                                                                   
pod "my-nginx" deleted                                                                          
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl get pods --show-labels                                                                
NAME                          READY     STATUS    RESTARTS   AGE       LABELS                   
helloworld-controller-h4bxw   1/1       Running   0          8s        app=helloworld           
helloworld-controller-q2zgz   1/1       Running   0          1m        app=helloworld           
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl get pods --show-labels -o wide                                                        
NAME                          READY     STATUS    RESTARTS   AGE       IP            NODE       
LABELS                                                                                          
helloworld-controller-h4bxw   1/1       Running   0          2m        172.17.0.3    minikube   
app=helloworld                                                                                  
helloworld-controller-q2zgz   1/1       Running   0          4m        172.17.0.19   minikube   
app=helloworld                                                                                  
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl apply -f ../pod/pod-helloworld.yml                                                    
pod "my-nginx" created                                                                          
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl get pods --show-labels -o wide                                                        
NAME                          READY     STATUS        RESTARTS   AGE       IP            NODE   
    LABELS                                                                                      
helloworld-controller-h4bxw   1/1       Running       0          5m        172.17.0.3    minikub
e   app=helloworld                                                                              
helloworld-controller-q2zgz   1/1       Running       0          6m        172.17.0.19   minikub
e   app=helloworld                                                                              
my-nginx                      0/1       Terminating   0          9s        <none>        minikub
e   app=helloworld                                                                              
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl get pods --show-labels -o wide                                                        
Unable to connect to the server: dial tcp 192.168.99.100:8443: connectex: A connection attempt f
ailed because the connected party did not properly respond after a period of time, or establishe
d connection failed because connected host has failed to respond.                               
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ                                                                                               
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ                                                                                               
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ                                                                                               
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ                                                                                               
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl get pods --show-labels -o wide                                                        
NAME                          READY     STATUS    RESTARTS   AGE       IP            NODE       
LABELS                                                                                          
helloworld-controller-h4bxw   1/1       Running   1          49m       172.17.0.17   minikube   
app=helloworld                                                                                  
helloworld-controller-q2zgz   1/1       Running   1          50m       172.17.0.6    minikube   
app=helloworld                                                                                  
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl scale rc helloworld-controller --replicas 5                                           
replicationcontroller "helloworld-controller" scaled                                            
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl get pods --show-labels -o wide                                                        
NAME                          READY     STATUS              RESTARTS   AGE       IP            N
ODE       LABELS                                                                                
helloworld-controller-bsrgp   0/1       ContainerCreating   0          5s        <none>        m
inikube   app=helloworld                                                                        
helloworld-controller-h4bxw   1/1       Running             1          50m       172.17.0.17   m
inikube   app=helloworld                                                                        
helloworld-controller-kd9rv   0/1       ContainerCreating   0          5s        <none>        m
inikube   app=helloworld                                                                        
helloworld-controller-pn844   0/1       ContainerCreating   0          5s        <none>        m
inikube   app=helloworld                                                                        
helloworld-controller-q2zgz   1/1       Running             1          51m       172.17.0.6    m
inikube   app=helloworld                                                                        
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl get pods --show-labels -o wide                                                        
NAME                          READY     STATUS    RESTARTS   AGE       IP            NODE       
LABELS                                                                                          
helloworld-controller-bsrgp   1/1       Running   0          22s       172.17.0.21   minikube   
app=helloworld                                                                                  
helloworld-controller-h4bxw   1/1       Running   1          50m       172.17.0.17   minikube   
app=helloworld                                                                                  
helloworld-controller-kd9rv   1/1       Running   0          22s       172.17.0.22   minikube   
app=helloworld                                                                                  
helloworld-controller-pn844   1/1       Running   0          22s       172.17.0.20   minikube   
app=helloworld                                                                                  
helloworld-controller-q2zgz   1/1       Running   1          52m       172.17.0.6    minikube   
app=helloworld                                                                                  
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl logs helloworld-controller-bsrgp                                                      
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl scale rc helloworld-controller --replicas 2                                           
replicationcontroller "helloworld-controller" scaled                                            
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl get pods --show-labels -o wide                                                        
NAME                          READY     STATUS        RESTARTS   AGE       IP            NODE   
    LABELS                                                                                      
helloworld-controller-bsrgp   0/1       Terminating   0          3m        172.17.0.21   minikub
e   app=helloworld                                                                              
helloworld-controller-h4bxw   1/1       Running       1          54m       172.17.0.17   minikub
e   app=helloworld                                                                              
helloworld-controller-kd9rv   0/1       Terminating   0          3m        172.17.0.22   minikub
e   app=helloworld                                                                              
helloworld-controller-q2zgz   1/1       Running       1          55m       172.17.0.6    minikub
e   app=helloworld                                                                              
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl get pods --show-labels -o wide                                                        
NAME                          READY     STATUS    RESTARTS   AGE       IP            NODE       
LABELS                                                                                          
helloworld-controller-h4bxw   1/1       Running   1          54m       172.17.0.17   minikube   
app=helloworld                                                                                  
helloworld-controller-q2zgz   1/1       Running   1          55m       172.17.0.6    minikube   
app=helloworld                                                                                  
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl describe pod helloworld-controller-h4bxw                                              
Name:           helloworld-controller-h4bxw                                                     
Namespace:      default                                                                         
Node:           minikube/192.168.99.100                                                         
Start Time:     Thu, 07 Mar 2019 10:12:13 +0530                                                 
Labels:         app=helloworld                                                                  
Annotations:    <none>                                                                          
Status:         Running                                                                         
IP:             172.17.0.17                                                                     
Controlled By:  ReplicationController/helloworld-controller                                     
Containers:                                                                                     
  nginx:                                                                                        
    Container ID:   docker://a7a23741809ea94f5bec6f67d6289bb8fd6b2a76f92c3ea6d75ad6274e05b1a9   
    Image:          nginx:alpine                                                                
    Image ID:       docker-pullable://nginx@sha256:816a226b57bb45b6388670b15f1adb60d83240857b2a0
d476dd3f0d8d231799d                                                                             
    Port:           80/TCP                                                                      
    State:          Running                                                                     
      Started:      Thu, 07 Mar 2019 10:59:54 +0530                                             
    Last State:     Terminated                                                                  
      Reason:       Completed                                                                   
      Exit Code:    0                                                                           
      Started:      Thu, 07 Mar 2019 10:12:14 +0530                                             
      Finished:     Thu, 07 Mar 2019 10:58:07 +0530                                             
    Ready:          True                                                                        
    Restart Count:  1                                                                           
    Environment:    <none>                                                                      
    Mounts:                                                                                     
      /var/run/secrets/kubernetes.io/serviceaccount from default-token-448nd (ro)               
Conditions:                                                                                     
  Type           Status                                                                         
  Initialized    True                                                                           
  Ready          True                                                                           
  PodScheduled   True                                                                           
Volumes:                                                                                        
  default-token-448nd:                                                                          
    Type:        Secret (a volume populated by a Secret)                                        
    SecretName:  default-token-448nd                                                            
    Optional:    false                                                                          
QoS Class:       BestEffort                                                                     
Node-Selectors:  <none>                                                                         
Tolerations:     <none>                                                                         
Events:                                                                                         
  Type     Reason                  Age                From               Message                
  ----     ------                  ----               ----               -------                
  Normal   Scheduled               1h                 default-scheduler  Successfully assigned h
elloworld-controller-h4bxw to minikube                                                          
  Normal   SuccessfulMountVolume   1h                 kubelet, minikube  MountVolume.SetUp succe
eded for volume "default-token-448nd"                                                           
  Normal   Pulled                  1h                 kubelet, minikube  Container image "nginx:
alpine" already present on machine                                                              
  Normal   Created                 1h                 kubelet, minikube  Created container      
  Normal   Started                 1h                 kubelet, minikube  Started container      
  Warning  FailedCreatePodSandBox  14m                kubelet, minikube  Failed create pod sandb
ox.                                                                                             
  Normal   SandboxChanged          14m (x2 over 15m)  kubelet, minikube  Pod sandbox changed, it
 will be killed and re-created.                                                                 
  Normal   SuccessfulMountVolume   12m                kubelet, minikube  MountVolume.SetUp succe
eded for volume "default-token-448nd"                                                           
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ kubectl describe rc helloworld-controller                                                     
Name:         helloworld-controller                                                             
Namespace:    default                                                                           
Selector:     app=helloworld                                                                    
Labels:       app=helloworld                                                                    
Annotations:  kubectl.kubernetes.io/last-applied-configuration={"apiVersion":"v1","kind":"Replic
ationController","metadata":{"annotations":{},"name":"helloworld-controller","namespace":"defaul
t"},"spec":{"replicas"...                                                                       
Replicas:     2 current / 2 desired                                                             
Pods Status:  2 Running / 0 Waiting / 0 Succeeded / 0 Failed                                    
Pod Template:                                                                                   
  Labels:  app=helloworld                                                                       
  Containers:                                                                                   
   nginx:                                                                                       
    Image:        nginx:alpine                                                                  
    Port:         80/TCP                                                                        
    Environment:  <none>                                                                        
    Mounts:       <none>                                                                        
  Volumes:        <none>                                                                        
Events:                                                                                         
  Type    Reason            Age   From                    Message                               
  ----    ------            ----  ----                    -------                               
  Normal  SuccessfulCreate  1h    replication-controller  Created pod: helloworld-controller-q2z
gz                                                                                              
  Normal  SuccessfulCreate  1h    replication-controller  Created pod: helloworld-controller-h4b
xw                                                                                              
  Normal  SuccessfulDelete  1h    replication-controller  Deleted pod: my-nginx                 
  Normal  SuccessfulCreate  23m   replication-controller  Created pod: helloworld-controller-bsr
gp                                                                                              
  Normal  SuccessfulCreate  23m   replication-controller  Created pod: helloworld-controller-pn8
44                                                                                              
  Normal  SuccessfulCreate  23m   replication-controller  Created pod: helloworld-controller-kd9
rv                                                                                              
  Normal  SuccessfulDelete  20m   replication-controller  Deleted pod: helloworld-controller-bsr
gp                                                                                              
  Normal  SuccessfulDelete  20m   replication-controller  Deleted pod: helloworld-controller-kd9
rv                                                                                              
  Normal  SuccessfulDelete  20m   replication-controller  Deleted pod: helloworld-controller-pn8
44                                                                                              
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s/rc (master)                         
λ                                                                                               
                                                                                                
                                                                                                
---------------------------------------------------------
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl apply -f dep/dep-helloworld.yml
deployment "helloworld-dep" created
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY     STATUS    RESTARTS   AGE
helloworld-dep-5cdb68cc76-6n4jw   1/1       Running   0          13s
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get deploy "helloworld-dep"
NAME             DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
helloworld-dep   1         1         1            1           1m
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl describe deploy "helloworld-dep"
Name:                   helloworld-dep
Namespace:              default
CreationTimestamp:      Thu, 07 Mar 2019 11:56:23 +0530
Labels:                 app=helloworld
Annotations:            deployment.kubernetes.io/revision=1
                        kubectl.kubernetes.io/last-applied-configuration={"apiVersion":"extensions/v1beta1","kind":"Deployment","metadata":{"annotations":{},"name":"helloworld-dep","namespace":"default"},"spec":{"replicas":1...
Selector:               app=helloworld
Replicas:               1 desired | 1 updated | 1 total | 1 available | 0 unavailable
StrategyType:           RollingUpdate
MinReadySeconds:        0
RollingUpdateStrategy:  1 max unavailable, 1 max surge
Pod Template:
  Labels:  app=helloworld
  Containers:
   web:
    Image:        nginx:alpine
    Port:         80/TCP
    Environment:  <none>
    Mounts:       <none>
  Volumes:        <none>
Conditions:
  Type           Status  Reason
  ----           ------  ------
  Available      True    MinimumReplicasAvailable
OldReplicaSets:  <none>
NewReplicaSet:   helloworld-dep-5cdb68cc76 (1/1 replicas created)
Events:
  Type    Reason             Age   From                   Message
  ----    ------             ----  ----                   -------
  Normal  ScalingReplicaSet  1m    deployment-controller  Scaled up replica set helloworld-dep-5cdb68cc76 to 1
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get replicaset helloworld-dep-5cdb68cc76
NAME                        DESIRED   CURRENT   READY     AGE
helloworld-dep-5cdb68cc76   1         1         1         2m
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY     STATUS    RESTARTS   AGE
helloworld-dep-5cdb68cc76-6n4jw   1/1       Running   0          2m
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl scale deploy helloworld-dep --replicas 5
deployment "helloworld-dep" scaled
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY     STATUS    RESTARTS   AGE
helloworld-dep-5cdb68cc76-5j58n   1/1       Running   0          11s
helloworld-dep-5cdb68cc76-6n4jw   1/1       Running   0          5m
helloworld-dep-5cdb68cc76-7bbn8   1/1       Running   0          10s
helloworld-dep-5cdb68cc76-9ldqh   1/1       Running   0          10s
helloworld-dep-5cdb68cc76-bqjcj   1/1       Running   0          10s
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl create -f pod/pod-helloworld.yml
pod "my-nginx" created
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY     STATUS    RESTARTS   AGE
helloworld-dep-5cdb68cc76-5j58n   1/1       Running   0          44s
helloworld-dep-5cdb68cc76-6n4jw   1/1       Running   0          5m
helloworld-dep-5cdb68cc76-7bbn8   1/1       Running   0          43s
helloworld-dep-5cdb68cc76-9ldqh   1/1       Running   0          43s
helloworld-dep-5cdb68cc76-bqjcj   1/1       Running   0          43s
my-nginx                          1/1       Running   0          7s
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pods --show-labels
NAME                              READY     STATUS    RESTARTS   AGE       LABELS
helloworld-dep-5cdb68cc76-5j58n   1/1       Running   0          1m        app=helloworld,pod-template-hash=1786247732
helloworld-dep-5cdb68cc76-6n4jw   1/1       Running   0          6m        app=helloworld,pod-template-hash=1786247732
helloworld-dep-5cdb68cc76-7bbn8   1/1       Running   0          1m        app=helloworld,pod-template-hash=1786247732
helloworld-dep-5cdb68cc76-9ldqh   1/1       Running   0          1m        app=helloworld,pod-template-hash=1786247732
helloworld-dep-5cdb68cc76-bqjcj   1/1       Running   0          1m        app=helloworld,pod-template-hash=1786247732
my-nginx                          1/1       Running   0          26s       app=helloworld
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl rollout history helloworld-dep
the server doesn't have a resource type "helloworld-dep"
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl rollout history deploy helloworld-dep
deployments "helloworld-dep"
REVISION  CHANGE-CAUSE
1         <none>

Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl delete -f dep/dep-helloworld.yml
deployment "helloworld-dep" deleted
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl apply -f dep/dep-helloworld.yml --record
deployment "helloworld-dep" created
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl rollout history deploy helloworld-dep
deployments "helloworld-dep"
REVISION  CHANGE-CAUSE
1         kubectl.exe apply --filename=dep/dep-helloworld.yml --record=true

Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl scale deploy helloworld-dep --replicas 10
deployment "helloworld-dep" scaled
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl rollout status deploy helloworld-dep
deployment "helloworld-dep" successfully rolled out
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl set image deploy helloworld-dep web=nginx:latest --record
deployment "helloworld-dep" image updated
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl rollout status deploy helloworld-dep
Waiting for rollout to finish: 2 out of 10 new replicas have been updated...
Waiting for rollout to finish: 2 out of 10 new replicas have been updated...
Waiting for rollout to finish: 3 out of 10 new replicas have been updated...
Waiting for rollout to finish: 3 out of 10 new replicas have been updated...
Waiting for rollout to finish: 4 out of 10 new replicas have been updated...
Waiting for rollout to finish: 4 out of 10 new replicas have been updated...
Waiting for rollout to finish: 4 out of 10 new replicas have been updated...
Waiting for rollout to finish: 4 out of 10 new replicas have been updated...
Waiting for rollout to finish: 4 out of 10 new replicas have been updated...
Waiting for rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for rollout to finish: 6 out of 10 new replicas have been updated...
Waiting for rollout to finish: 6 out of 10 new replicas have been updated...
Waiting for rollout to finish: 6 out of 10 new replicas have been updated...
Waiting for rollout to finish: 7 out of 10 new replicas have been updated...
Waiting for rollout to finish: 7 out of 10 new replicas have been updated...
Waiting for rollout to finish: 7 out of 10 new replicas have been updated...
Waiting for rollout to finish: 8 out of 10 new replicas have been updated...
Waiting for rollout to finish: 8 out of 10 new replicas have been updated...
Waiting for rollout to finish: 8 out of 10 new replicas have been updated...
Waiting for rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for rollout to finish: 1 old replicas are pending termination...
Waiting for rollout to finish: 1 old replicas are pending termination...
Waiting for rollout to finish: 1 old replicas are pending termination...
Waiting for rollout to finish: 9 of 10 updated replicas are available...
deployment "helloworld-dep" successfully rolled out
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get deploy helloworld-dep
NAME             DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
helloworld-dep   10        10        10           10          6m
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY     STATUS    RESTARTS   AGE
helloworld-dep-7b64bc55d4-54cb9   1/1       Running   0          1m
helloworld-dep-7b64bc55d4-6gz4s   1/1       Running   0          51s
helloworld-dep-7b64bc55d4-7fkcs   1/1       Running   0          1m
helloworld-dep-7b64bc55d4-7wk2d   1/1       Running   0          59s
helloworld-dep-7b64bc55d4-cdmbv   1/1       Running   0          1m
helloworld-dep-7b64bc55d4-d84sm   1/1       Running   0          1m
helloworld-dep-7b64bc55d4-gsccr   1/1       Running   0          57s
helloworld-dep-7b64bc55d4-xx769   1/1       Running   0          45s
helloworld-dep-7b64bc55d4-z2gm2   1/1       Running   0          49s
helloworld-dep-7b64bc55d4-z79qs   1/1       Running   0          36s
my-nginx                          1/1       Running   0          9m
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl describe pod helloworld-dep-7b64bc55d4-54cb9 | grep nginx
    Image:          nginx:latest
    Image ID:       docker-pullable://nginx@sha256:e2048a115f51d61fa589f5f592f677300f1c122de07904e0ebefe44a6a89da23
  Normal  Pulled                 1m    kubelet, minikube  Container image "nginx:latest" already present on machine
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl rollout history deploy helloworld-dep
deployments "helloworld-dep"
REVISION  CHANGE-CAUSE
1         kubectl.exe scale deploy helloworld-dep --replicas=10
2         kubectl.exe set image deploy helloworld-dep web=nginx:latest --record=true

Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl rollout undo deploy helloworld-dep --to-revision 1
deployment "helloworld-dep"
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl rollout status deploy helloworld-dep
Waiting for rollout to finish: 4 out of 10 new replicas have been updated...
Waiting for rollout to finish: 4 out of 10 new replicas have been updated...
Waiting for rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for rollout to finish: 5 out of 10 new replicas have been updated...
Waiting for rollout to finish: 6 out of 10 new replicas have been updated...
Waiting for rollout to finish: 6 out of 10 new replicas have been updated...
Waiting for rollout to finish: 6 out of 10 new replicas have been updated...
Waiting for rollout to finish: 6 out of 10 new replicas have been updated...
Waiting for rollout to finish: 6 out of 10 new replicas have been updated...
Waiting for rollout to finish: 7 out of 10 new replicas have been updated...
Waiting for rollout to finish: 7 out of 10 new replicas have been updated...
Waiting for rollout to finish: 8 out of 10 new replicas have been updated...
Waiting for rollout to finish: 8 out of 10 new replicas have been updated...
Waiting for rollout to finish: 8 out of 10 new replicas have been updated...
Waiting for rollout to finish: 8 out of 10 new replicas have been updated...
Waiting for rollout to finish: 8 out of 10 new replicas have been updated...
Waiting for rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for rollout to finish: 9 out of 10 new replicas have been updated...
Waiting for rollout to finish: 1 old replicas are pending termination...
Waiting for rollout to finish: 1 old replicas are pending termination...
Waiting for rollout to finish: 1 old replicas are pending termination...
Waiting for rollout to finish: 9 of 10 updated replicas are available...
deployment "helloworld-dep" successfully rolled out
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY     STATUS    RESTARTS   AGE
helloworld-dep-5cdb68cc76-2crfr   1/1       Running   0          43s
helloworld-dep-5cdb68cc76-2sgxw   1/1       Running   0          47s
helloworld-dep-5cdb68cc76-8w8rl   1/1       Running   0          51s
helloworld-dep-5cdb68cc76-br9qg   1/1       Running   0          26s
helloworld-dep-5cdb68cc76-frtfj   1/1       Running   0          48s
helloworld-dep-5cdb68cc76-qdtmq   1/1       Running   0          51s
helloworld-dep-5cdb68cc76-qtvtg   1/1       Running   0          41s
helloworld-dep-5cdb68cc76-r2bv8   1/1       Running   0          18s
helloworld-dep-5cdb68cc76-v854g   1/1       Running   0          17s
helloworld-dep-5cdb68cc76-znb7l   1/1       Running   0          28s
my-nginx                          1/1       Running   0          12m
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl describe pod helloworld-dep-5cdb68cc76-2crfr | grep nginx
    Image:          nginx:alpine
    Image ID:       docker-pullable://nginx@sha256:816a226b57bb45b6388670b15f1adb60d83240857b2a0d476dd3f0d8d231799d
  Normal  Pulled                 47s   kubelet, minikube  Container image "nginx:alpine" already present on machine
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl rollout history deploy helloworld-dep
deployments "helloworld-dep"
REVISION  CHANGE-CAUSE
2         kubectl.exe set image deploy helloworld-dep web=nginx:latest --record=true
3         kubectl.exe scale deploy helloworld-dep --replicas=10

Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ

-------------------------------------------------------------------------------------------------------
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl describe svc hw-svc
Name:                     hw-svc
Namespace:                default
Labels:                   <none>
Annotations:              kubectl.kubernetes.io/last-applied-configuration={"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"name":"hw-svc","namespace":"default"},"spec":{"ports":[{"nodePort":31001,"port":8888,...
Selector:                 app=helloworld
Type:                     NodePort
IP:                       10.96.43.1
Port:                     <unset>  8888/TCP
TargetPort:               nginxport/TCP
NodePort:                 <unset>  31001/TCP
Endpoints:                172.17.0.22:80,172.17.0.6:80
Session Affinity:         None
External Traffic Policy:  Cluster
Events:                   <none>
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY     STATUS    RESTARTS   AGE
helloworld-dep-5cdb68cc76-qdtmq   1/1       Running   0          4h
helloworld-dep-5cdb68cc76-rrkcn   1/1       Running   0          2h
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get svc
NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE
hw-svc       NodePort    10.96.43.1   <none>        8888:31001/TCP   2h
kubernetes   ClusterIP   10.96.0.1    <none>        443/TCP          85d
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl exec -it helloworld-dep-5cdb68cc76-qdtmq -- bash
oci runtime error: exec failed: container_linux.go:265: starting container process caused "exec: \"bash\": executable file not found in $PATH"

command terminated with exit code 126
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl exec -it helloworld-dep-5cdb68cc76-qdtmq -- sh
/ # bash
sh: bash: not found
/ # curl
sh: curl: not found
/ # apk update
fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/main/x86_64/APKINDEX.tar.gz
fetch http://dl-cdn.alpinelinux.org/alpine/v3.9/community/x86_64/APKINDEX.tar.gz
v3.9.2-1-g592d872fb8 [http://dl-cdn.alpinelinux.org/alpine/v3.9/main]
v3.9.0-90-gf0b6b9da2f [http://dl-cdn.alpinelinux.org/alpine/v3.9/community]
OK: 9755 distinct packages available
/ # apk add curl
(1/5) Installing ca-certificates (20190108-r0)
(2/5) Installing nghttp2-libs (1.35.1-r0)
(3/5) Installing libssh2 (1.8.0-r4)
(4/5) Installing libcurl (7.64.0-r1)
(5/5) Installing curl (7.64.0-r1)
Executing busybox-1.29.3-r10.trigger
Executing ca-certificates-20190108-r0.trigger
OK: 17 MiB in 34 packages
/ # curl 10.96.43.1:8888
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>
/ # curl db-svc:8888 | head -n 4
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0curl: (6) Could not resolve host: db-svc
/ # curl hw-svc:8888 | head -n 4
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   612  100   612    0     0    573      0  0:00:01  0:00<!DOCTYPE html>  0
:<html>
0<head>
1<title>Welcome to nginx!</title>
 --:--:--   573
/ # curl 10.96.43.1:8888 | head -n4
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:--  0:00:05 --:--:--     0
  0     0    0     0    0     0      0      0 --:--:--  0:00:18 --:--:--     0^C
/ # cat /etc/resolv.conf
nameserver 10.96.0.10
search default.svc.cluster.local svc.cluster.local cluster.local
options ndots:5
/ # exit
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get svc
NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE
hw-svc       NodePort    10.96.43.1   <none>        8888:31001/TCP   2h
kubernetes   ClusterIP   10.96.0.1    <none>        443/TCP          85d
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get svc -n kube-system
NAME                   TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)             AGE
default-http-backend   NodePort    10.103.225.247   <none>        80:30001/TCP        85d
heapster               ClusterIP   10.105.175.217   <none>        80/TCP              85d
kube-dns               ClusterIP   10.96.0.10       <none>        53/UDP,53/TCP       85d
kubernetes-dashboard   NodePort    10.103.11.130    <none>        80:30000/TCP        85d
metrics-server         ClusterIP   10.109.22.160    <none>        443/TCP             84d
monitoring-grafana     NodePort    10.109.41.42     <none>        80:30002/TCP        85d
monitoring-influxdb    ClusterIP   10.103.96.251    <none>        8083/TCP,8086/TCP   85d
tiller-deploy          ClusterIP   10.96.170.66     <none>        44134/TCP           20d
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl describe svc kube-dns
Error from server (NotFound): services "kube-dns" not found
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl describe svc kube-dns -n kube-system
Name:              kube-dns
Namespace:         kube-system
Labels:            addonmanager.kubernetes.io/mode=Reconcile
                   k8s-app=kube-dns
                   kubernetes.io/name=KubeDNS
Annotations:       kubectl.kubernetes.io/last-applied-configuration={"apiVersion":"v1","kind":"Service","metadata":{"annotations":{},"labels":{"addonmanager.kubernetes.io/mode":"Reconcile","k8s-app":"kube-dns","kubernet...
Selector:          k8s-app=kube-dns
Type:              ClusterIP
IP:                10.96.0.10
Port:              dns  53/UDP
TargetPort:        53/UDP
Endpoints:         172.17.0.19:53
Port:              dns-tcp  53/TCP
TargetPort:        53/TCP
Endpoints:         172.17.0.19:53
Session Affinity:  None
Events:            <none>
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pods -n kube-system -o wide
NAME                                    READY     STATUS    RESTARTS   AGE       IP
  NODE
default-http-backend-cvzhd              1/1       Running   31         21d       172.17.0.16
  minikube
heapster-546c9964c6-2w8ld               1/1       Running   11         21d       172.17.0.13
  minikube
heapster-xnbjb                          1/1       Running   11         21d       172.17.0.14
  minikube
influxdb-grafana-tx55c                  2/2       Running   22         21d       172.17.0.10
  minikube
kube-addon-manager-minikube             1/1       Running   12         85d       192.168.99.100
  minikube
kube-dns-54cccfbdf8-f5fbr               3/3       Running   42         21d       172.17.0.19
  minikube
kubernetes-dashboard-77d8b98585-9cffv   1/1       Running   18         21d       172.17.0.15
  minikube
metrics-server-bb9ffc6b8-c4bsh          1/1       Running   12         21d       172.17.0.8
  minikube
monitoring-grafana-65757b9656-h4fbs     1/1       Running   11         21d       172.17.0.3
  minikube
monitoring-influxdb-66946c9f58-h5lhw    1/1       Running   11         21d       172.17.0.4
  minikube
nginx-ingress-controller-zjd74          1/1       Running   99         21d       172.17.0.18
  minikube
tiller-deploy-5b7c59888b-6rbgl          1/1       Running   19         6d        172.17.0.12
  minikube
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY     STATUS    RESTARTS   AGE
helloworld-dep-5cdb68cc76-qdtmq   1/1       Running   0          4h
helloworld-dep-5cdb68cc76-rrkcn   1/1       Running   0          2h
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ #kube-dns-54cccfbdf8-f5fbr
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get deploy -n kube-system kube-dns
NAME       DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
kube-dns   1         1         1            1           85d
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get rs -n kube-system kube-dns kube-dns-54cccfbdf8
Error from server (NotFound): replicasets.extensions "kube-dns" not found
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get rs -n kube-system kube-dns-54cccfbdf8
NAME                  DESIRED   CURRENT   READY     AGE
kube-dns-54cccfbdf8   1         1         1         85d
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pod -n kube-system kube-dns-54cccfbdf8-f5fbr
NAME                        READY     STATUS    RESTARTS   AGE
kube-dns-54cccfbdf8-f5fbr   3/3       Running   42         21d
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get svc -n kube-system kube-dns
NAME       TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)         AGE
kube-dns   ClusterIP   10.96.0.10   <none>        53/UDP,53/TCP   85d
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get deploy
NAME             DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE
helloworld-dep   2         2         2            2           4h
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get rs
NAME                        DESIRED   CURRENT   READY     AGE
helloworld-dep-5cdb68cc76   2         2         2         4h
helloworld-dep-7b64bc55d4   0         0         0         4h
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get pods
NAME                              READY     STATUS    RESTARTS   AGE
helloworld-dep-5cdb68cc76-qdtmq   1/1       Running   0          4h
helloworld-dep-5cdb68cc76-rrkcn   1/1       Running   0          2h
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl get svc
NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE
hw-svc       NodePort    10.96.43.1   <none>        8888:31001/TCP   2h
kubernetes   ClusterIP   10.96.0.1    <none>        443/TCP          85d
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl exec helloworld-dep-7b64bc55d4 -- cat /etc/resolv.conf
Error from server (NotFound): pods "helloworld-dep-7b64bc55d4" not found
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl exec helloworld-dep-7b64bc55d4-rrkcn -- cat /etc/resolv.conf
Error from server (NotFound): pods "helloworld-dep-7b64bc55d4-rrkcn" not found
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ kubectl exec helloworld-dep-5cdb68cc76-rrkcn -- cat /etc/resolv.conf
cat: can't open 'E:/downloads/cmder/vendor/git-for-windows/etc/resolv.conf': No such file or directory
command terminated with exit code 1
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ
Dell lap@Dell ~/docker-workshop/mar4/ora-mar4-dock-kube/k8s (master)
λ
